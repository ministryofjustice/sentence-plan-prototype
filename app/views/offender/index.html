{% extends "layout.html" %}

{% block afterHeader %}
  {% include "includes/key-details.html" %}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      {% if planSaved %}
        {{ mojBanner({
          type: 'success',
          text: planSaved,
          iconFallbackText: 'Success'
        }) }} 
      {% endif %}

      <h1 class="govuk-visually-hidden">
        Offender plans: {{ offender.name }}
      </h1>

      <div class="moj-page-header-actions"">
        <div class="moj-page-header-actions__title">
          <h1 class="govuk-heading-l">
            Active plan
          </h1>
        </div>



        {% if not data['plan-status']%}
      </div>
          <p>There is no active plan.</p>
          {{ govukButton ({
            text: 'Start a new plan',
            href: '/offender/create-plan/summary'
          }) }}



        {% elif data['plan-status'] == 'draft' %}

      </div> 
          <p>There is a draft plan from {{ data | date("D MMMM YYYY") }}.</p>
          {{ govukButton ({
            text: 'View draft',
            href: '/offender/create-plan/check-your-answers'
          }) }}




        {% elif data['plan-status'] == 'saved' %}

        <div class="moj-page-header-actions__actions">
          <div class="moj-button-menu">
            <div class="moj-button-menu__wrapper">

              {{ govukButton ({
                text: 'Print',
                href: '/offender/print/',
                classes: 'govuk-button--secondary moj-button-menu__item moj-page-header-actions__action'
              }) }}

              {{ govukButton ({
                text: 'End the plan',
                href: '/offender/close',
                classes: 'moj-button-menu__item moj-page-header-actions__action'
              }) }}

            </div>
          </div>
        </div>
      </div> 

    {# </div>
    <div class="govuk-grid-column-two-thirds"> #}


    




{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{% from "govuk/components/table/macro.njk" import govukTable %}

{% set goalsHtml %}
  {% include "includes/tab-goals.html" %}
{% endset -%}

{% set detailsHtml %}
  {% include "includes/tab-details.html" %}
{% endset -%}

{% set reviewsHtml %}
  {% include "includes/tab-reviews.html" %}
{% endset -%}



      {{ govukTabs({
        items: [
          {
            label: "Objectives",
            id: "goals",
            panel: {
              html: goalsHtml
            }
          },
          {
            label: "Plan summary",
            id: "details",
            panel: {
              html: detailsHtml
            }
          },
          {
            label: "Sentence board reviews",
            id: "board-reviews",
            panel: {
              html: reviewsHtml
            }
          }
        ]
      }) }}




      


        



        

        


        

        

        

      {% endif %} {# plan status #}


      




      <hr class="govuk-section-break section-break-large">


      <h2 class="govuk-heading-m">
        Previous plans
      </h2>

      <ul class="govuk-list">
        {% if data['plan-closed'] %}
        <li>
          <a class="govuk-link" href="#">Plan closed {{ moment | date("D MMMM YYYY") }}</a>
        </li>
        {% endif %}
        <li>
          <a class="govuk-link" href="#">Plan closed {{ moment | date("subtract", 100, "days") | date("D MMMM YYYY") }}</a>
        </li>
        <li>
          <a class="govuk-link" href="#">Plan closed {{ moment | date("subtract", 211, "days") | date("D MMMM YYYY") }}</a>
        </li>
      </ul>


    </div>
  </div>
{% endblock %}
